<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>لیست پروکسی‌های رایگان</title>
  <style>
    body {
      background-color: #121212;
      color: #e0e0e0;
      font-family: "Vazir", sans-serif;
      margin: 0;
      padding: 0;
      text-align: center;
    }
    h1 {
      margin-top: 20px;
      font-size: 1.8em;
    }
    .buttons {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      margin: 20px 0;
    }
    button {
      background-color: #1f1f1f;
      color: #e0e0e0;
      border: 1px solid #444;
      padding: 10px 20px;
      margin: 5px;
      cursor: pointer;
      border-radius: 5px;
      transition: background 0.3s;
    }
    button:hover {
      background-color: #333;
    }
    .proxy-list {
      max-width: 600px;
      margin: 0 auto;
      padding: 10px;
      background-color: #1e1e1e;
      border-radius: 8px;
      box-shadow: 0 0 10px #000;
    }
    .proxy-list ul {
      list-style: none;
      padding: 0;
    }
    .proxy-list li {
      padding: 8px;
      border-bottom: 1px solid #333;
      direction: ltr;
      text-align: left;
    }
    .proxy-list li:last-child {
      border-bottom: none;
    }
  </style>
</head>
<body>
  <h1>🛡️ لیست پروکسی‌های رایگان</h1>
  <div class="buttons">
    <button onclick="loadProxies('SOCKS5')">SOCKS5</button>
    <button onclick="loadProxies('SOCKS4')">SOCKS4</button>
    <button onclick="loadProxies('HTTP')">HTTP</button>
    <button onclick="loadProxies('ALL')">همه</button>
  </div>
  <div class="proxy-list">
    <ul id="proxyList"><li>برای مشاهده پروکسی‌ها، نوع مورد نظر را انتخاب کنید.</li></ul>
  </div>

  <script>
    const proxyList = document.getElementById("proxyList");

    async function loadProxies(type) {
      proxyList.innerHTML = "<li>در حال دریافت اطلاعات...</li>";
      const urls = [
        "https://raw.githubusercontent.com/TheSpeedX/PROXY-List/master/socks5.txt",
        "https://raw.githubusercontent.com/TheSpeedX/PROXY-List/master/socks4.txt",
        "https://raw.githubusercontent.com/TheSpeedX/PROXY-List/master/http.txt",
        "https://raw.githubusercontent.com/ShiftyTR/Proxy-List/master/proxy.txt"
      ];

      let proxies = [];

      try {
        const responses = await Promise.all(urls.map(url => fetch(url)));
        const texts = await Promise.all(responses.map(res => res.text()));

        texts.forEach((text, index) => {
          const lines = text.split("\n").map(line => line.trim()).filter(line => line);
          if (type === "SOCKS5" && index === 0) proxies = lines;
          else if (type === "SOCKS4" && index === 1) proxies = lines;
          else if (type === "HTTP" && index === 2) proxies = lines;
          else if (type === "ALL") proxies.push(...lines);
        });

        if (proxies.length === 0) {
          proxyList.innerHTML = "<li>پروکسی‌ای یافت نشد.</li>";
        } else {
          proxyList.innerHTML = proxies.map(p => `<li>${p.replace(/^(socks5|socks4|http):\/\//, "")}</li>`).join("");
        }
      } catch (error) {
        proxyList.innerHTML = `<li>خطا در دریافت اطلاعات: ${error.message}</li>`;
      }
    }
  </script>
</body>
</html>
